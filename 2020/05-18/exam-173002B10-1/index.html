<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">

<script> 
  (function(){
    if(''){
      if (prompt('input password') !== ''){
        alert('error！');
        history.back();
      }
    }
  })();
</script>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo-loki.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"summer10920.github.io","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"left","width":370,"display":"post","padding":20,"offset":20,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>


  <meta name="description" content="本篇為網乙解析系列之題組一。難易度偏低，評分項目多且步驟較多但重複性高，只要善用同題目作為範本複製貼上，進行修改調整就能快速完成題目動作。本篇之前置作業 (lib.php 與 MySQL 規劃）不再進行說明。">
<meta property="og:type" content="article">
<meta property="og:title" content="[題目解析] 技能檢定！網頁設計乙級術科考題分析（題組一）">
<meta property="og:url" content="http://summer10920.github.io/2020/05-18/exam-173002B10-1/">
<meta property="og:site_name" content="洛奇的邪惡組織手札">
<meta property="og:description" content="本篇為網乙解析系列之題組一。難易度偏低，評分項目多且步驟較多但重複性高，只要善用同題目作為範本複製貼上，進行修改調整就能快速完成題目動作。本篇之前置作業 (lib.php 與 MySQL 規劃）不再進行說明。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/R4L7SuR.png">
<meta property="og:image" content="https://i.imgur.com/igd8Xfs.png">
<meta property="og:image" content="https://i.imgur.com/CPhNg9q.png">
<meta property="og:image" content="https://i.imgur.com/Gb8Pbqb.png">
<meta property="og:image" content="https://i.imgur.com/A2jlOsP.png">
<meta property="og:image" content="https://i.imgur.com/fo48pnO.png">
<meta property="og:image" content="https://i.imgur.com/Uz7ESVU.png">
<meta property="og:image" content="https://i.imgur.com/Uhxt0cY.png">
<meta property="og:image" content="https://i.imgur.com/fkJgDij.png">
<meta property="og:image" content="https://i.imgur.com/SWP0XsG.png">
<meta property="og:image" content="https://i.imgur.com/Ji8jU7J.png">
<meta property="article:published_time" content="2020-05-18T12:24:28.000Z">
<meta property="article:modified_time" content="2020-05-21T13:13:16.000Z">
<meta property="article:author" content="Loki Jiang">
<meta property="article:tag" content="技術士考照與全國技能競賽">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/R4L7SuR.png">

<link rel="canonical" href="http://summer10920.github.io/2020/05-18/exam-173002B10-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>[題目解析] 技能檢定！網頁設計乙級術科考題分析（題組一） | 洛奇的邪惡組織手札</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146423952-3"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-146423952-3');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">洛奇的邪惡組織手札</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">I am WebDeveloper!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>標籤<span class="badge">6</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分類<span class="badge">9</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>所有文章<span class="badge">39</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋內文
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/summer10920" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="http://summer10920.github.io/2020/05-18/exam-173002B10-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/loki_img.jpg">
      <meta itemprop="name" content="Loki Jiang">
      <meta itemprop="description" content="Time waits for no oneヽ(｀Д´)ﾉ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="洛奇的邪惡組織手札">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [題目解析] 技能檢定！網頁設計乙級術科考題分析（題組一）
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2020-05-18 20:24:28" itemprop="dateCreated datePublished" datetime="2020-05-18T20:24:28+08:00">2020-05-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2020-05-21 21:13:16" itemprop="dateModified" datetime="2020-05-21T21:13:16+08:00">2020-05-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AB%B6%E8%B3%BD%E6%AA%A2%E5%AE%9A/" itemprop="url" rel="index"><span itemprop="name">競賽檢定</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AB%B6%E8%B3%BD%E6%AA%A2%E5%AE%9A/%E7%B6%B2%E9%A0%81%E8%A8%AD%E8%A8%88%E4%B9%99%E7%B4%9A/" itemprop="url" rel="index"><span itemprop="name">網頁設計乙級</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>本篇為網乙解析系列之題組一。難易度偏低，評分項目多且步驟較多但重複性高，只要善用同題目作為範本複製貼上，進行修改調整就能快速完成題目動作。本篇之前置作業 (lib.php 與 MySQL 規劃）不再進行說明。</p>
<a id="more"></a>

<blockquote>
<p>網乙術科題庫分析 - 卓越科技大學校園資訊系統</p>
</blockquote>
<p>事前建置說明：<a href="/2020/05-14/exam-173002B10-0/" title="[題目解析] 技能檢定！網頁設計乙級術科考題分析（事前準備）">[題目解析] 技能檢定！網頁設計乙級術科考題分析（事前準備）</a></p>
<hr>
<h1 id="No-10-管理登入按鈕-20"><a href="#No-10-管理登入按鈕-20" class="headerlink" title="No.10 管理登入按鈕 (20%)"></a>No.10 管理登入按鈕 (20%)</h1><p>您必須先做第 10 題，才能方便在其他題目上做切換前後台檢查。90 分鐘所設計的 lib.php 記得放到本題組目錄下。<br><img src="https://i.imgur.com/R4L7SuR.png" alt="q1t10"></p>
<h2 id="修正登入連結"><a href="#修正登入連結" class="headerlink" title="修正登入連結"></a>修正登入連結</h2><p>將三個頁面跟登入按鈕有關的 onclick 做正確的導向。我們直接轉址到 admin.php 就可以了。調整</p>
<h3 id="修改-index-php-news-php-login-php"><a href="#修改-index-php-news-php-login-php" class="headerlink" title="修改 index.php, news.php, login.php"></a>修改 index.php, news.php, login.php</h3><figure class="highlight html"><figcaption><span>index.php, news.php, login.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--右邊--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"width:100%; margin-left:auto; margin-right:auto; margin-top:2px; height:50px;"</span> <span class="attr">onclick</span>=<span class="string">"lo(<span class="symbol">&amp;#39;</span>?do=admin<span class="symbol">&amp;#39;</span>)"</span>&gt;</span>管理登入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>調整 onclick 到正確的 php 位置</p>
<figure class="highlight html"><figcaption><span>index.php, news.php, login.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--右邊--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">"width:100%; margin-left:auto; margin-right:auto; margin-top:2px; height:50px;"</span> <span class="attr">onclick</span>=<span class="string">"lo('admin.php')"</span>&gt;</span>管理登入<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="判斷是否已登入"><a href="#判斷是否已登入" class="headerlink" title="判斷是否已登入"></a>判斷是否已登入</h2><p>如果在 admin.php 還沒有登入，就踢到 login.php 去。將這段塞到最前面</p>
<h3 id="修改-admin-php"><a href="#修改-admin-php" class="headerlink" title="修改 admin.php"></a>修改 admin.php</h3><figure class="highlight php"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">'lib.php'</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_SESSION[<span class="string">'admin'</span>])) plo(<span class="string">"login.php"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="FROM-提交動作"><a href="#FROM-提交動作" class="headerlink" title="FROM 提交動作"></a>FROM 提交動作</h2><p>這裡很簡單沒有 php 要處理（因為要提交表單到 <code>api.php</code> )：</p>
<ol>
<li>在 from 的 action 內多一個 api.php 連接，target 則不要</li>
<li>另外順手把密碼的 name=ps 改成 name=pwd 看順眼</li>
</ol>
<h3 id="修改-login-php"><a href="#修改-login-php" class="headerlink" title="修改 login.php"></a>修改 login.php</h3><figure class="highlight html"><figcaption><span>login.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--正中央--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"?do=check"</span> <span class="attr">target</span>=<span class="string">"back"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>管理員登入區<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>帳號 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"acc"</span> <span class="attr">autofocus</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>密碼 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"ps"</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"送出"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清除"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>調整為</p>
<figure class="highlight html"><figcaption><span>login.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--正中央--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=check"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>管理員登入區<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>帳號 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"acc"</span> <span class="attr">autofocus</span>=<span class="string">""</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>密碼 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"pwd"</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"送出"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清除"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="FROM-的-SQL-處理"><a href="#FROM-的-SQL-處理" class="headerlink" title="FROM 的 SQL 處理"></a>FROM 的 SQL 處理</h2><p>舉凡所有的 from 表單都獨立起來到 api.php 做處理，所以 login 的動作要開始寫入：</p>
<ol>
<li>新增 api.php 寫入，檢查資料庫是否存在</li>
<li>登入成功則給予 SESSION 咬住紀錄。</li>
<li>這裡題目要求錯誤提示並返回時要清除輸入資料，所以用 JS 轉址方式，不能用 window.history.back</li>
</ol>
<h3 id="建立-api-php"><a href="#建立-api-php" class="headerlink" title="建立 api.php"></a>建立 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">"lib.php"</span>);</span><br><span class="line"><span class="keyword">switch</span> ($_GET[<span class="string">'do'</span>]) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'check'</span>:</span><br><span class="line">    $re = select(<span class="string">"q1t10_admin"</span>, <span class="string">"acc='"</span> . $_POST[<span class="string">'acc'</span>] . <span class="string">"' and pwd='"</span> . $_POST[<span class="string">'pwd'</span>] . <span class="string">"'"</span>);</span><br><span class="line">    <span class="keyword">if</span> ($re) &#123;</span><br><span class="line">      $_SESSION[<span class="string">'admin'</span>] = $_POST[<span class="string">'acc'</span>];</span><br><span class="line">      plo(<span class="string">"admin.php"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">echo</span> <span class="string">"&lt;script&gt;alert('帳號或密碼錯誤');"</span> . jlo(<span class="string">"login.php"</span>) . <span class="string">"&lt;/script&gt;"</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="登出作業"><a href="#登出作業" class="headerlink" title="登出作業"></a>登出作業</h2><p>我們要處理登出的反應，也就是清除 SESSION，同樣透過 api.php 完成：</p>
<ol>
<li>修正 admin.php 的登出按鈕，處理 <code>location.replace()</code> 部分添加 <code>api.php?do=logout</code></li>
</ol>
<h3 id="修改-admin-php-1"><a href="#修改-admin-php-1" class="headerlink" title="修改 admin.php"></a>修改 admin.php</h3><figure class="highlight html"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"document.cookie=<span class="symbol">&amp;#39;</span>user=<span class="symbol">&amp;#39;</span>;location.replace(<span class="symbol">&amp;#39;</span>?<span class="symbol">&amp;#39;</span>)"</span> <span class="attr">style</span>=<span class="string">"width:99%; margin-right:2px; height:50px;"</span>&gt;</span>管理登出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改為</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"document.cookie='user=';location.replace('api.php?do=logout')"</span> <span class="attr">style</span>=<span class="string">"width:99%; margin-right:2px; height:50px;"</span>&gt;</span>管理登出<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接著登出處理，添加 case logout 項目</p>
<h3 id="修改-api-php"><a href="#修改-api-php" class="headerlink" title="修改 api.php"></a>修改 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'logout'</span>:</span><br><span class="line">    <span class="keyword">unset</span>($_SESSION[<span class="string">'admin'</span>]);</span><br><span class="line">    plo(<span class="string">"login.php"</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-3-網站標題-35"><a href="#No-3-網站標題-35" class="headerlink" title="No.3 網站標題 (35%)"></a>No.3 網站標題 (35%)</h1><p>你已經可以正常切換前後台就能開始處理各題目，同時注意後台 admin.php 的初始頁為該 No.3。因這裡算第一次處理後台，所以 main_zone 要先處理掉</p>
<p><img src="https://i.imgur.com/igd8Xfs.png" alt="q1t3"></p>
<h2 id="內容區域調整"><a href="#內容區域調整" class="headerlink" title="內容區域調整"></a>內容區域調整</h2><p>原後台選單連結都是<code>?do=admin&amp;redo=XX</code>。所以先做切換 mainzone 的功能。在後台主頁增添 php 代碼</p>
<h3 id="增添-admin-php"><a href="#增添-admin-php" class="headerlink" title="增添 admin.php"></a>增添 admin.php</h3><figure class="highlight php"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line">$mainzone = (!<span class="keyword">empty</span>($_GET[<span class="string">'do'</span>])) ? $_GET[<span class="string">'do'</span>] : <span class="string">"atitle"</span>;</span><br></pre></td></tr></table></figure>
<p>同時簡化這些 do+redo 的連結，我們合併成 do 將每個開頭多個 a 字母做差異。先修好第一筆選單的 href 連接並指到 atitle 。</p>
<figure class="highlight html"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"./Management page_files/Management page.htm"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>網站標題管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=ad"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>動態文字廣告管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=mvim"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>動畫圖片管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=image"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>校園映象資料管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=total"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>進站總人數管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=bottom"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>頁尾版權資料管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=news"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>最新消息資料管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=admin"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>管理者帳號管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=admin&amp;redo=menu"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>選單管理<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修改為</p>
<figure class="highlight html"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=atitle"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>網站標題管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=aad"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>動態文字廣告管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=amvim"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>動畫圖片管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=aimage"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>校園映象資料管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=atotal"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>進站總人數管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=abottom"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>頁尾版權資料管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=anews"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>最新消息資料管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=aadmin"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>管理者帳號管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:#000; font-size:13px; text-decoration:none;"</span> <span class="attr">href</span>=<span class="string">"?do=amenu"</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span>選單管理 <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>抽取內容區做成 include，預設是第三題頁面，所以抽取該段另存為 <code>atitle.php</code></p>
<figure class="highlight html"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>網站標題管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">target</span>=<span class="string">"back"</span> <span class="attr">action</span>=<span class="string">"?do=tii"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"45%"</span>&gt;</span>網站標題<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"23%"</span>&gt;</span>替代文字<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op(<span class="symbol">&amp;#39;</span>#cover<span class="symbol">&amp;#39;</span>,<span class="symbol">&amp;#39;</span>#cvr<span class="symbol">&amp;#39;</span>,<span class="symbol">&amp;#39;</span>view.php?do=title<span class="symbol">&amp;#39;</span>)"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">"新增網站標題圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>更改為</p>
<figure class="highlight php"><figcaption><span>admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">include_once</span>($mainzone . <span class="string">".php"</span> ); </span><br><span class="line"><span class="comment">/*不用要&lt;?=?&gt;會出現 1 的文字*/</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下來所有的解題步驟會是後台 <mark>select, insert, update, delete</mark> ，前台只需 select</p>
<h2 id="後台的內容格式"><a href="#後台的內容格式" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>找到 <code>atitle.php</code> 表格中間，塞入 <code>php:select</code> 並帶入 <code>tr&gt;td</code> HTML 顯示</li>
<li>新增提交到 <code>view.php?do=titleadd</code>，保留原 onclick 結構不要動到。</li>
<li>form 提交到  <code>api.php?do=titlemdy</code></li>
<li>更新圖片提交到 <code>view.php?do=titlechg</code> 並夾帶 ID，保留原 onclick 結構不要動到。</li>
<li>注意 input 的 name 與 value 寫法，依自訂函式修改刪除有固定的宣告格式，請注意重點說明。</li>
</ol>
<h3 id="修改-atitle-php"><a href="#修改-atitle-php" class="headerlink" title="修改 atitle.php"></a>修改 atitle.php</h3><figure class="highlight html"><figcaption><span>atitle.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>網站標題管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=titlemdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"45%"</span>&gt;</span>網站標題<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"23%"</span>&gt;</span>替代文字<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t3_title"</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $ro) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/&lt;?= $ro['img'] ?&gt;"</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">height</span>=<span class="string">"30"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"text[&lt;?= $ro['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $ro['text'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $ro['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="radio" name="radio" value="&lt;?= $ro['id'] ?&gt;" &lt;?= ($ro['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $ro['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=titlechg&amp;id=&lt;?= $ro['id'] ?&gt;')"</span> <span class="attr">value</span>=<span class="string">"更新圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=titleadd')"</span> <span class="attr">value</span>=<span class="string">"新增網站標題圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div class="note info">
            <p><strong>※重點※</strong></p><h3 id="批次修改說明"><a href="#批次修改說明" class="headerlink" title="批次修改說明"></a>批次修改說明</h3><p>lib.php 的 自訂函式 update 已設計成支援多筆資料更新。原理為使用陣列進行迴圈處理，最小單位一次只處理一個 SQL 欄位更新。每個最小變數將提供<code>id（索引 key), name（SQL 欄位）, value（內容值）</code>。</p><p>例如 input：</p><figure class="highlight html"><figcaption><span>form's method is post</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"text[7]"</span> <span class="attr">value</span>=<span class="string">"內容 7"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"text[8]"</span> <span class="attr">value</span>=<span class="string">"內容 8"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>這樣在自訂函式 <code>update($_POST,&quot;mytable&quot;)</code> 處理結果為：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mytable <span class="keyword">SET</span> <span class="built_in">text</span>=<span class="string">'內容 7'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">7</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> mytable <span class="keyword">SET</span> <span class="built_in">text</span>=<span class="string">'內容 8'</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">8</span>;</span><br></pre></td></tr></table></figure><p>radio 部分的 dpy 表單需求比較麻煩（全題組唯獨只有 q1t3 出現），需要特別處理：</p><ol><li>先設計 hidden 表單的 <code>dpy[id]</code> 全部都是 0。</li><li>接著 radio 表單負責告知已選取之 <code>id</code> 為多少。</li><li>由 api.php 將合併翻新 dpy[<code>id</code>]=1，這樣最後的 dpy 陣列 除了指定 id 是 1，其他都是 0。</li></ol><p>舉例：</p><figure class="highlight"><figcaption><span>form's method is post</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[1]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[2]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[3]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">&lt;input type="radio" name="radio" value="3" &lt;?= ($ro['dpy']) ? "checked" : "" ?&gt;&gt;</span><br></pre></td></tr></table></figure><p>此時 3 做 dpy 唯一並送出後，得到 <code>dpy[]={0,0,0,0,...}</code> &amp; <code>radio=3</code>。因此我們要整理成 <code>dpy[]={0,0,1,0,...}</code> 方便做 UPDATE 批次暴力修改。</p><h3 id="批次刪除說明"><a href="#批次刪除說明" class="headerlink" title="批次刪除說明"></a>批次刪除說明</h3><p>自訂函式 delete 也是支援多筆刪除，原理也是批次處理成變數做 delete，但只需要 del 動作名稱與 id 對象即可。例如：</p><figure class="highlight html"><figcaption><span>form's method is post</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"7"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"8"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>則 <code>delete($_POST,&quot;mytable&quot;)</code>處理結果為：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">7</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> mytable <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">8</span>;</span><br></pre></td></tr></table></figure>
          </div>

<h2 id="新增單筆"><a href="#新增單筆" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>後續有多種不同操作進入 view.php，先設定好 switch-case 處理判斷 <code>titleadd</code> 處理，主要是顯示 HTML FORM。其次該表單將提交到 api.php，採有相同的 do 參數（同樣走 <code>do=titleadd</code>) 這能方便之後的快速複製。注意有用到檔案上傳因此 form 宣告 <code>enctype=&quot;multipart/form-data&quot;</code> 。</p>
<h3 id="建立-view-php"><a href="#建立-view-php" class="headerlink" title="建立 view.php"></a>建立 view.php</h3><figure class="highlight html"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">require_once</span>(<span class="string">"lib.php"</span>);</span></span><br><span class="line"><span class="php"><span class="keyword">switch</span> ($_GET[<span class="string">'do'</span>]) &#123;</span></span><br><span class="line"><span class="php">  <span class="keyword">case</span> <span class="string">'titleadd'</span>:</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>新增標題區圖片<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>標題區圖片 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"img"</span> <span class="attr">type</span>=<span class="string">"file"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>標題區替代文字 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"text"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"新增"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="php">&#125;</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>接著，規劃 <code>titleadd</code> 的 api 提交動作，新增 case 透過 function 快速完成 insert，並回到 admin 首頁</p>
<h3 id="增添-api-php"><a href="#增添-api-php" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'titleadd'</span>:</span><br><span class="line">  $_POST[<span class="string">'img'</span>] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  insert($_POST, <span class="string">"q1t3_title"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆"><a href="#修改多筆-刪除多筆" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><ul>
<li>從前台試著操作多筆修改跟刪除按下送出。網頁會到 <code>api.php?do=titlemdy</code>，繼續此動作處理。</li>
<li>同時將 radio 與 <code>dpy[]</code> 整合為完整的 <code>dpy[]</code>，完成後回到後台頁面 admin.php</li>
<li>沒把握你可以在 case 內先下 <code>print_r($_POST)</code>，確認畫面的資料正不正常跟有哪些資料</li>
</ul>
<h3 id="增添-api-php-1"><a href="#增添-api-php-1" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'titlemdy'</span>:</span><br><span class="line">  $_POST[<span class="string">'dpy'</span>][$_POST[<span class="string">'radio'</span>]] = <span class="number">1</span>;</span><br><span class="line">  update($_POST, <span class="string">"q1t3_title"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t3_title"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改單一圖片"><a href="#修改單一圖片" class="headerlink" title="修改單一圖片"></a>修改單一圖片</h2><p>這時候的列表、新增、修改、刪除都可順利操作，只剩單一圖片修改將由 view.php 作業。可以拿前 case 來改，因為只有純上傳圖片我們需要 <code>$_GET</code> 藏一個 ID</p>
<h3 id="增添-view-php"><a href="#增添-view-php" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'titlechg'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;&amp;id=&lt;?= $_GET['id'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;修改標題區圖片&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;標題區圖片 ： &lt;input name="img" type="file"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="修改" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>提交部分參考之前的 case 做修改，為了配合格式，將 id、欄位對象、新檔名整合成陣列變數送交給 update</p>
<h3 id="增添-api-php-2"><a href="#增添-api-php-2" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'titlechg'</span>:</span><br><span class="line">  $_POST[<span class="string">'img'</span>][$_GET[<span class="string">'id'</span>]] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  update($_POST, <span class="string">"q1t3_title"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台顯示"><a href="#前台顯示" class="headerlink" title="前台顯示"></a>前台顯示</h2><p>由於 inde.php 代碼太多避免誤碰，前端所需 PHP 處理改寫在 lib.php 內，視同寫在 index.php （注意所有頁面都會繼承，故變數命名需注意）</p>
<h3 id="增添-lib-php"><a href="#增添-lib-php" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//t3</span></span><br><span class="line">$re = select(<span class="string">"q1t3_title"</span>, <span class="string">"dpy=1"</span>);</span><br><span class="line">$t3_img = <span class="string">"img/"</span> . $re[<span class="number">0</span>][<span class="string">'img'</span>];</span><br><span class="line">$t3_text = $re[<span class="number">0</span>][<span class="string">'text'</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li>將 title 區域部分做修改（記得前面要有 include lib.php)，同時超連結順手一律導向 index.php（題目沒要求導向）</li>
<li>要求圖片替代文字素材卻用 background，不做推測，a 與 div 都給予 title 說明</li>
</ul>
<h3 id="修改-admin-php-login-php-index-php-news-php"><a href="#修改-admin-php-login-php-index-php-news-php" class="headerlink" title="修改 admin.php, login.php, index.php, news.php"></a>修改 admin.php, login.php, index.php, news.php</h3><figure class="highlight html"><figcaption><span>admin.php, login.php, index.php, news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">""</span> <span class="attr">href</span>=<span class="string">"?"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ti"</span> <span class="attr">style</span>=<span class="string">"background:url(<span class="symbol">&amp;#39;</span>use/<span class="symbol">&amp;#39;</span>); background-size:cover;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!--標題--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>帶入 <code>$t3_img</code> 與 <code>$t3_text</code> 調整為</p>
<figure class="highlight html"><figcaption><span>admin.php, login.php, index.php, news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">title</span>=<span class="string">"&lt;?= $t3_text ?&gt;"</span> <span class="attr">href</span>=<span class="string">"?"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span>=<span class="string">"&lt;?= $t3_text ?&gt;"</span> <span class="attr">class</span>=<span class="string">"ti"</span> <span class="attr">style</span>=<span class="string">"background:url(&lt;?= $t3_img ?&gt;); background-size:cover;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--標題--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>這時候要注意 login.php 跟 index.php 跟 news.php 都還沒有連結 lib.php。所以開頭記得補上</p>
<figure class="highlight php"><figcaption><span>login.php, index.php, news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span>(<span class="string">'lib.php'</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-4-動態文字廣告-30"><a href="#No-4-動態文字廣告-30" class="headerlink" title="No.4 動態文字廣告 (30%)"></a>No.4 動態文字廣告 (30%)</h1><p>透過已完成的第三題，你可以很快地複製修改出此題的後台內容格式。</p>
<p><img src="https://i.imgur.com/CPhNg9q.png" alt="q1t4"></p>
<h2 id="後台的內容格式-1"><a href="#後台的內容格式-1" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>注意 input 的 name 與 value，宣告方法依據修改與刪除有所不同。</li>
<li>新增單項提交到 <code>view.php?do=maqeadd</code></li>
<li>form 提交到 <code>api.php?do=maqemdy</code></li>
<li>提交前另準備一組 <code>dpy[$id]=0</code>，這樣沒選的保持 0，有選的被覆蓋會是 1，update 時全體更新</li>
</ol>
<h3 id="新增-aad-php-（參考-atitle-php"><a href="#新增-aad-php-（參考-atitle-php" class="headerlink" title="新增 aad.php （參考 atitle.php)"></a>新增 aad.php （參考 atitle.php)</h3><figure class="highlight html"><figcaption><span>aad.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>動態文字廣告管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=maqemdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"68%"</span>&gt;</span>動態文字廣告<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t4_maqe"</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:90%"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"text[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['text'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="checkbox" name="dpy[&lt;?= $value['id'] ?&gt;]" value="1" &lt;?= ($value['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=maqeadd')"</span> <span class="attr">value</span>=<span class="string">"新增動態文字廣告"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="新增單筆-1"><a href="#新增單筆-1" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃（可複製前題 case 做修改）</p>
<h3 id="增添-view-php-1"><a href="#增添-view-php-1" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'maqeadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增動態文字廣告&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;動態文字廣告 ： &lt;input name="text" type="text"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>對 api.php 做 SQL 處理，接著回到該單元內容（可複製前題 case 做修改）。</p>
<h3 id="增添-api-php-3"><a href="#增添-api-php-3" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'maqeadd'</span>:</span><br><span class="line">  insert($_POST, <span class="string">"q1t4_maqe"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aad"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-1"><a href="#修改多筆-刪除多筆-1" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>從前台試著操作多筆修改跟刪除按下送出。網頁會到 api.php?do=maqemdy。處理完成後回到後台頁面 admin.php</p>
<p>沒把握你可以在 case 內先下 print_r($_POST)，確認畫面的資料正不正常跟有哪些資料</p>
<h3 id="增添-api-php-4"><a href="#增添-api-php-4" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'maqemdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t4_maqe"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t4_maqe"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aad"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台顯示-1"><a href="#前台顯示-1" class="headerlink" title="前台顯示"></a>前台顯示</h2><p>由於 inde.php 代碼太多避免誤碰，前端所需 PHP 處理改寫在 lib.php 內，視同寫在 index.php （注意所有頁面都會繼承，故變數命名需注意）</p>
<p>撈取文字並串為一個字串並用空白分開。</p>
<h3 id="增添-lib-php-1"><a href="#增添-lib-php-1" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//t4</span></span><br><span class="line">$re = select(<span class="string">"q1t4_maqe"</span>, <span class="string">"dpy=1"</span>);</span><br><span class="line">$t4_text = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $data) $t4_text .= $data[<span class="string">'text'</span>] . <span class="string">"　　"</span>;</span><br></pre></td></tr></table></figure>

<p>接著前端部分，將 marquee 區域部分標籤內增加 php 變數</p>
<h3 id="修改-login-php-index-php-news-php"><a href="#修改-login-php-index-php-news-php" class="headerlink" title="修改 login.php, index.php, news.php"></a>修改 login.php, index.php, news.php</h3><figure class="highlight html"><figcaption><span>login.php, index.php, news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">scrolldelay</span>=<span class="string">"120"</span> <span class="attr">direction</span>=<span class="string">"left"</span> <span class="attr">style</span>=<span class="string">"position:absolute; width:100%; height:40px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>帶入 <code>$t4_text</code> 改為</p>
<figure class="highlight html"><figcaption><span>login.php, index.php, news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">marquee</span> <span class="attr">scrolldelay</span>=<span class="string">"120"</span> <span class="attr">direction</span>=<span class="string">"left"</span> <span class="attr">style</span>=<span class="string">"position:absolute; width:100%; height:40px;"</span>&gt;</span></span><br><span class="line">    <span class="php"><span class="meta">&lt;?</span>= $t4_text <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">marquee</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-5-動畫圖片輪播-30"><a href="#No-5-動畫圖片輪播-30" class="headerlink" title="No.5 動畫圖片輪播 (30%)"></a>No.5 動畫圖片輪播 (30%)</h1><p>透過前面的操作完成，可以很快地複製修改出此題的後台內容格式。</p>
<p><img src="https://i.imgur.com/Gb8Pbqb.png" alt="q1t5"></p>
<h2 id="後台的內容格式-2"><a href="#後台的內容格式-2" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>注意 input 的 name 與 value，宣告方法依據修改與刪除有所不同。</li>
<li>新增單項提交到 <code>view.php?do=mvimadd</code></li>
<li>form 提交到 <code>api.php?do=mvimmdy</code></li>
<li>更新動畫提交到 <code>view.php?do=mvimchg</code> 並夾帶 ID</li>
<li>提交前另準備一組 <code>dpy[$id]=0</code>，這樣沒選的保持 0，有選的被覆蓋會是 1，update 時全體更新</li>
</ol>
<h3 id="新增-amvim-php（參考-atitle-php"><a href="#新增-amvim-php（參考-atitle-php" class="headerlink" title="新增 amvim.php（參考 atitle.php)"></a>新增 amvim.php（參考 atitle.php)</h3><figure class="highlight html"><figcaption><span>amvim.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>動畫圖片管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=mvimmdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"68%"</span>&gt;</span>動畫圖片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t5_mvim"</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">"img/&lt;?= $value['text'] ?&gt;"</span> <span class="attr">width</span>=<span class="string">"300"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="checkbox" name="dpy[&lt;?= $value['id'] ?&gt;]" value="1" &lt;?= ($value['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=mvimchg&amp;id=&lt;?= $value['id'] ?&gt;')"</span> <span class="attr">value</span>=<span class="string">"更換動畫"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=mvimadd')"</span> <span class="attr">value</span>=<span class="string">"新增動畫圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="新增單筆-2"><a href="#新增單筆-2" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃（可複製前題 case 做修改）</p>
<h3 id="增添-view-php-2"><a href="#增添-view-php-2" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'mvimadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增動畫圖片&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;動畫圖片 ： &lt;input name="img" type="file"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-5"><a href="#增添-api-php-5" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'mvimadd'</span>:</span><br><span class="line">  $_POST[<span class="string">'text'</span>] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  insert($_POST, <span class="string">"q1t5_mvim"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amvim"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-2"><a href="#修改多筆-刪除多筆-2" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-6"><a href="#增添-api-php-6" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'mvimmdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t5_mvim"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t5_mvim"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amvim"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改單一圖片-1"><a href="#修改單一圖片-1" class="headerlink" title="修改單一圖片"></a>修改單一圖片</h2><p>這時候的新增修改刪除都可以順利操作，只剩換圖作業。可以拿前一 case 來改一下。因為只有純上傳，我們需要藏一個 ID</p>
<h3 id="增添-view-php-3"><a href="#增添-view-php-3" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'mvimchg'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;&amp;id=&lt;?= $_GET['id'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;修改動畫圖片&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;標題區圖片 ： &lt;input name="img" type="file"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="修改" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>提交部分參考之前的 case 做修改，為了配合格式，將 id、欄位對象、新檔名整合成陣列變數送交給 update</p>
<h3 id="增添-api-php-7"><a href="#增添-api-php-7" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'mvimchg'</span>:</span><br><span class="line">  $_POST[<span class="string">'text'</span>][$_GET[<span class="string">'id'</span>]] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  update($_POST, <span class="string">"q1t5_mvim"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amvim"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>此時到這裡，後台的功能已設計完成。接下來是在各版型內顯示該 title 圖片</p>
<h2 id="前台的動畫顯示"><a href="#前台的動畫顯示" class="headerlink" title="前台的動畫顯示"></a>前台的動畫顯示</h2><p>先撈取出 mvim 的所有檔案路徑，先存在一個 array。之後會用到</p>
<h3 id="增添-lib-php-2"><a href="#增添-lib-php-2" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//t5</span></span><br><span class="line">$re = select(<span class="string">"q1t5_mvim"</span>, <span class="string">"dpy=1"</span>);</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $data) $t5_ary[] = <span class="string">"img/"</span> . $data[<span class="string">'text'</span>];</span><br></pre></td></tr></table></figure>

<p>題目已經做好 js 的輪播工具。透過理解知道由一個 JS 陣列變數 lin 進行抽換。所以我們要幫所有圖片塞入到該陣列。php 的 array 要塞到 js 的陣列可使用 json_encode 來快速完成。貪快可把宣告 new array 給直接指定了。</p>
<h3 id="修改-index-php"><a href="#修改-index-php" class="headerlink" title="修改 index.php"></a>修改 index.php</h3><figure class="highlight javascript"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lin=<span class="keyword">new</span> <span class="built_in">Array</span>();</span><br></pre></td></tr></table></figure>

<p>修改為</p>
<figure class="highlight javascript"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> lin = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">lin = &lt;?= json_encode($t5_ary) ?&gt;;</span><br></pre></td></tr></table></figure>

<p>此時就能正常播放。但初始畫面有 3 秒的空窗沒東西。這是題目設計沒弄好。如果要修正可調整兩點（可以不做）</p>
<ol>
<li>網頁執行時，應該先出現 DIV 再有 JS（才能抓到 DOM 位置），原題目顛倒。</li>
<li>if 內負責等待三秒，應該在等待三秒前先跑一次 html 印出</li>
</ol>
<p>調整原段</p>
<figure class="highlight html"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--正中央--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> lin = <span class="keyword">new</span> <span class="built_in">Array</span>();</span></span><br><span class="line"><span class="handlebars"><span class="xml">    lin = <span class="php"><span class="meta">&lt;?</span>=json_encode($t5_ary)<span class="meta">?&gt;</span></span>;</span></span></span><br><span class="line">    if(lin.length&gt;1)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="actionscript">        setInterval(<span class="string">"ww()"</span>,<span class="number">3000</span>);</span></span><br><span class="line">        now=1;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">ww</span><span class="params">()</span></span></span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="handlebars"><span class="xml">        $("#mwww").html("<span class="tag">&lt;<span class="name">embed</span> <span class="attr">loop</span>=<span class="string">true</span> <span class="attr">src</span>=<span class="string">'"+lin[now]+"'</span> <span class="attr">style</span>=<span class="string">'width:99%; height:100%;'</span>&gt;</span><span class="tag">&lt;/<span class="name">embed</span>&gt;</span>")</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">//$("#mwww").attr("src",lin[now])</span></span></span><br><span class="line">        now++;</span><br><span class="line">        if(now&gt;=lin.length)</span><br><span class="line">        now=0;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:100%; padding:2px; height:290px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mwww"</span> <span class="attr">loop</span>=<span class="string">"true"</span> <span class="attr">style</span>=<span class="string">"width:100%; height:100%;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:99%; height:100%; position:relative;"</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>沒有資料<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>修正為</p>
<figure class="highlight html"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--正中央--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:100%; padding:2px; height:290px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mwww"</span> <span class="attr">loop</span>=<span class="string">"true"</span> <span class="attr">style</span>=<span class="string">"width:100%; height:100%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:99%; height:100%; position:relative;"</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>沒有資料<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> lin = <span class="keyword">new</span> <span class="built_in">Array</span>();</span></span><br><span class="line"><span class="handlebars"><span class="xml">  lin = <span class="php"><span class="meta">&lt;?</span>= json_encode($t5_ary) <span class="meta">?&gt;</span></span>;</span></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">var</span> now = <span class="number">0</span>;</span></span><br><span class="line"><span class="actionscript">  ww(); <span class="comment">// 修正初始沒資料畫面</span></span></span><br><span class="line">  if (lin.length &gt; 1) &#123;</span><br><span class="line"><span class="actionscript">    setInterval(<span class="string">"ww()"</span>, <span class="number">3000</span>);</span></span><br><span class="line">    now = 1;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">ww</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">    $("#mwww").html("<span class="tag">&lt;<span class="name">embed</span> <span class="attr">loop</span>=<span class="string">true</span> <span class="attr">src</span>=<span class="string">'" + lin[now] + "'</span> <span class="attr">style</span>=<span class="string">'width:99%; height:100%;'</span>&gt;</span><span class="tag">&lt;/<span class="name">embed</span>&gt;</span>")</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">//$("#mwww").attr("src",lin[now])</span></span></span><br><span class="line">    now++;</span><br><span class="line">    if (now &gt;= lin.length)</span><br><span class="line">      now = 0;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-6-校園映像-40"><a href="#No-6-校園映像-40" class="headerlink" title="No.6 校園映像 (40%)"></a>No.6 校園映像 (40%)</h1><p>與第五題的後台版面比較相近，可以拿來很快複製修改出第六題的內容格式。</p>
<p><img src="https://i.imgur.com/A2jlOsP.png" alt="q1t6"></p>
<h2 id="後台的內容格式-3"><a href="#後台的內容格式-3" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>調整 aimage.php 表格中間，塞入 php:select 並帶入 tr&gt;td HTML 顯示。每次只顯示 3 筆，所以要設定 limit 與 page 關係</li>
<li>新增單項提交到 <code>view.php?do=imageadd</code></li>
<li>form 提交到 <code>api.php?do=imagemdy</code></li>
<li>更新動畫提交到 <code>view.php?do=imagechg</code>，並夾帶 ID</li>
<li>這裡還要多個分頁效果步驟，先把畫面都能一次可呈現之後再設計分頁</li>
<li>提交前另準備一組 dpy[$id]=0，這樣沒選的保持 0，有選的被覆蓋會是 1，update 時全體更新</li>
</ol>
<h3 id="新增-aimage-php（參考-amvim-php"><a href="#新增-aimage-php（參考-amvim-php" class="headerlink" title="新增 aimage.php（參考 amvim.php)"></a>新增 aimage.php（參考 amvim.php)</h3><figure class="highlight html"><figcaption><span>aimage.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>校園映像資料管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=imagemdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"68%"</span>&gt;</span>校園映像資料圖片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $nowpage = (<span class="keyword">empty</span>($_GET[<span class="string">'page'</span>])) ? <span class="number">1</span> : $_GET[<span class="string">'page'</span>];</span></span><br><span class="line"><span class="php">      $begin = ($nowpage - <span class="number">1</span>) * <span class="number">3</span>;</span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t6_img"</span>, <span class="string">"1 limit "</span> . $begin . <span class="string">",3"</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">"img/&lt;?= $value['text'] ?&gt;"</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"68"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="checkbox" name="dpy[&lt;?= $value['id'] ?&gt;]" value="1" &lt;?= ($value['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=imagechg&amp;id=&lt;?= $value['id'] ?&gt;')"</span> <span class="attr">value</span>=<span class="string">"更換圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=imageadd')"</span> <span class="attr">value</span>=<span class="string">"新增校園映像圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>此時可以在 URL 上面多加個 <code>&amp;page=2</code> 做測試，是否正常的 limit。</li>
<li>接著規劃分頁導覽，從 news.php 那裏偷來現成的 HTML/CSS 長這樣</li>
</ul>
<figure class="highlight php"><figcaption><span>news.php</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;div style=<span class="string">"text-align:center;"</span>&gt;</span><br><span class="line">    &lt;a class="bl" style="font-size:30px;" href="?do=meg&amp;p=0"&gt;&amp;lt;&amp;nbsp;&lt;/a&gt;</span><br><span class="line">    &lt;a class="bl" style="font-size:30px;" href="?do=meg&amp;p=0"&gt;&amp;nbsp;&amp;gt;&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>把這段塞到版型下面，也就是兩個 table 之間修改成。同時做兩件事</p>
<ol>
<li>由於分頁導航使用 <code>function page($table,$sql,$range,$now_page)</code></li>
<li>回傳會是一個陣列包了頭 <kbd><</kbd>、連續數字、尾 <kbd>></kbd>，且各自帶 page 值，用 foreach 做印出</li>
<li>同時判斷如果是當前頁等於印出的文字時，字體放大</li>
</ol>
<figure class="highlight html"><figcaption><span>aimage.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">  $re = navpage(<span class="string">"q1t6_img"</span>, <span class="number">1</span>, <span class="number">3</span>, $nowpage);</span></span><br><span class="line"><span class="php">  <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $key =&gt; $value)</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'&lt;a class="bl" style="font-size:'</span> . (($nowpage == $key) ? <span class="string">"60"</span> : <span class="string">"30"</span>) . <span class="string">'px;" href="?do=aimage&amp;page='</span> . $value . <span class="string">'"&gt;'</span> . $key . <span class="string">'&lt;/a&gt;'</span>;</span></span><br><span class="line"><span class="php">  <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="新增單筆-3"><a href="#新增單筆-3" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃 （可複製前題目做修改）</p>
<h3 id="增添-view-php-4"><a href="#增添-view-php-4" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'imageadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增校園映像圖片&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;校園映像圖片 ： &lt;input name="img" type="file"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>接著，對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-8"><a href="#增添-api-php-8" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'imageadd'</span>:</span><br><span class="line">  $_POST[<span class="string">'text'</span>] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  insert($_POST, <span class="string">"q1t6_img"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aimage"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-3"><a href="#修改多筆-刪除多筆-3" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-9"><a href="#增添-api-php-9" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'imagemdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t6_img"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t6_img"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aimage"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改單一圖片-2"><a href="#修改單一圖片-2" class="headerlink" title="修改單一圖片"></a>修改單一圖片</h2><p>這時候的新增修改刪除都可以順利操作，只剩單圖片更改作業。完成 view.php。可以拿前一 case 來改一下</p>
<h3 id="增添-view-php-5"><a href="#增添-view-php-5" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'imagechg'</span>:</span><br><span class="line">  <span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;&amp;id=&lt;?= $_GET['id'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;修改校園映像圖片&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;校園映像圖片 ： &lt;input name="img" type="file"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="修改" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  <span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>接著，參考之前的 case，同時為了配合 function，將 id 跟 file 合併為一個陣列</p>
<h3 id="增添-api-php-10"><a href="#增添-api-php-10" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'imagechg'</span>:</span><br><span class="line">  $_POST[<span class="string">'text'</span>][$_GET[<span class="string">'id'</span>]] = addfile($_FILES[<span class="string">'img'</span>]);</span><br><span class="line">  update($_POST, <span class="string">"q1t6_img"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aimage"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>此時到這裡，後台的功能已設計完成。接下來是在各版型內顯示該 title 圖片</p>
<h2 id="前台的顯示格式"><a href="#前台的顯示格式" class="headerlink" title="前台的顯示格式"></a>前台的顯示格式</h2><p>題目已經做好 js 的輪播代碼但沒有提供 HTML 真差勁，因此先分析再猜想原構。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> nowpage=<span class="number">0</span>,num=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pp</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s,t;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">1</span>&amp;&amp;nowpage<span class="number">-1</span>&gt;=<span class="number">0</span>) &#123;nowpage--;&#125;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">2</span>&amp;&amp;(nowpage+<span class="number">1</span>)*<span class="number">3</span>&lt;=num*<span class="number">1</span>+<span class="number">3</span>) &#123;nowpage++;&#125;</span><br><span class="line">    $(<span class="string">".im"</span>).hide()</span><br><span class="line">    <span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;=<span class="number">2</span>;s++)&#123;</span><br><span class="line">        t=s*<span class="number">1</span>+nowpage*<span class="number">1</span>;</span><br><span class="line">        $(<span class="string">"#ssaa"</span>+t).show()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">pp(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>大致上理解每次操作會對所有 class=im 的對象做隱藏，而只對 id=ssaa+數字做顯示。function pp() 會根據目前參數 x 是多少做對應的 nowpage 增減 (x 只會是 1 或 2)，nowpage 會去自動推算那些 <code>#ssaa+數字</code> 要顯示。所以大致上的 HTML 應該長這樣：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"上箭頭"</span> <span class="attr">onclick</span>=<span class="string">pp(1)</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"im"</span> <span class="attr">id</span>=<span class="string">"ssaa0"</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"im"</span> <span class="attr">id</span>=<span class="string">"ssaa1"</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"im"</span> <span class="attr">id</span>=<span class="string">"ssaa2"</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"im"</span> <span class="attr">id</span>=<span class="string">"ssaa3"</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"下箭頭"</span> <span class="attr">onclick</span>=<span class="string">pp(2)</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>將 img 這些 HTML 段落，寫在 select 時規劃好。這裡的$key 沒有特別值，會是 0 開始</p>
<h3 id="增添-lib-php-3"><a href="#增添-lib-php-3" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//t6</span></span><br><span class="line">$re = select(<span class="string">"q1t6_img"</span>, <span class="string">"dpy=1"</span>);</span><br><span class="line">$t6_many = count($re);</span><br><span class="line">$t6_text = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $key =&gt; $value) $t6_text .= <span class="string">'&lt;img src="img/'</span> . $value[<span class="string">'text'</span>] . <span class="string">'" class="im" id="ssaa'</span> . $key . <span class="string">'" width="150" height="103"/&gt;'</span>;</span><br></pre></td></tr></table></figure>

<p>接著有三個頁面要一起改，找到該區域</p>
<h3 id="修改-index-php-amp-login-php-amp-news-php"><a href="#修改-index-php-amp-login-php-amp-news-php" class="headerlink" title="修改 index.php &amp; login.php &amp; news.php"></a>修改 index.php &amp; login.php &amp; news.php</h3><figure class="highlight html"><figcaption><span>index.php & login.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>校園映象區<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>整合 php 與調整 HTML，修改為</p>
<figure class="highlight html"><figcaption><span>index.php & login.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>校園映象區<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cent"</span> <span class="attr">style</span>=<span class="string">"padding:10px 20px"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/01E01.jpg"</span> <span class="attr">onclick</span>=<span class="string">"pp(1)"</span>&gt;</span></span><br><span class="line">	<span class="php"><span class="meta">&lt;?</span>= $t6_text <span class="meta">?&gt;</span></span></span><br><span class="line">	<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/01E02.jpg"</span> <span class="attr">onclick</span>=<span class="string">"pp(2)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此時還不能完全正常操作。因為 JS 的資料有 2 點錯誤：</p>
<ol>
<li><code>var num=0;</code> 這部分是指總數量。所以要給 JS 一個總圖數。</li>
<li><code>if(x==2&amp;&amp;(nowpage+1)*3&amp;lt;=num*1+3)</code> 這裡計算方式錯誤，應該是下個頁碼跳點將不是最後頁碼跳點（最後的秀圖跳點會是總數減三。</li>
</ol>
<p>因此修改為</p>
<figure class="highlight javascript"><figcaption><span>index.php & login.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> nowpage = <span class="number">0</span>, num = &lt;?= $t6_many ?&gt;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pp</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s, t;</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">1</span> &amp;&amp; nowpage - <span class="number">1</span> &gt;= <span class="number">0</span>) nowpage--; <span class="comment">//往前</span></span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">2</span> &amp;&amp; nowpage + <span class="number">1</span> &lt;= num - <span class="number">3</span>) nowpage++; <span class="comment">//往後</span></span><br><span class="line">  $(<span class="string">".im"</span>).hide()</span><br><span class="line">  <span class="keyword">for</span> (s = <span class="number">0</span>; s &lt;= <span class="number">2</span>; s++) &#123;</span><br><span class="line">    t = s * <span class="number">1</span> + nowpage * <span class="number">1</span>;</span><br><span class="line">    $(<span class="string">"#ssaa"</span> + t).show()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">pp(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-7-進站總人數-20"><a href="#No-7-進站總人數-20" class="headerlink" title="No.7 進站總人數 (20%)"></a>No.7 進站總人數 (20%)</h1><p>這題很簡單，如法炮製隨便找個類似來改<br><img src="https://i.imgur.com/fo48pnO.png" alt="q1t7"></p>
<h2 id="修改後台的內容格式"><a href="#修改後台的內容格式" class="headerlink" title="修改後台的內容格式"></a>修改後台的內容格式</h2><ul>
<li>整個複製版型後，根據需求做修改調整。題目沒要求是否帶舊值（示意圖有）你可以不做。</li>
<li>記得 from 提交改成到 do=totalmdy。要記得 id 固定是 1</li>
</ul>
<h3 id="新增-atotal-php（參考-atitle-php"><a href="#新增-atotal-php（參考-atitle-php" class="headerlink" title="新增 atotal.php（參考 atitle.php)"></a>新增 atotal.php（參考 atitle.php)</h3><figure class="highlight html"><figcaption><span>atotal.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$re = select(<span class="string">"q1t7_total"</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=totalmdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>進站總人數管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>進站總人數 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"num[1]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $re[0]['num'] ?&gt;"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"修改確定"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再來對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-11"><a href="#增添-api-php-11" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'totalmdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t7_total"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=atotal"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台的-total-顯示格式"><a href="#前台的-total-顯示格式" class="headerlink" title="前台的 total 顯示格式"></a>前台的 total 顯示格式</h2><p>增加以下代碼做提取準備。同時判別如果沒 SESSION 紀錄，先 update 更新+1 並更新此值。（透過我們設計的 num+1，函式會自動加 1，不用管原本是多少）</p>
<h3 id="增添-lib-php-4"><a href="#增添-lib-php-4" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//t7</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">empty</span>($_SESSION[<span class="string">'visit'</span>])) &#123;</span><br><span class="line">  $_SESSION[<span class="string">'visit'</span>] = <span class="string">"check"</span>;</span><br><span class="line">  $post[<span class="string">'num+1'</span>] = <span class="number">1</span>;</span><br><span class="line">  update($post, <span class="string">"q1t7_total"</span>);</span><br><span class="line">&#125; <span class="comment">//先判斷是否更新，之後才撈取</span></span><br><span class="line">$re = select(<span class="string">"q1t7_total"</span>, <span class="number">1</span>);</span><br><span class="line">$t7_text = $re[<span class="number">0</span>][<span class="string">'num'</span>];</span><br></pre></td></tr></table></figure>

<p>再來將進站總人數區域部分標籤內增加 php 變數</p>
<h3 id="修改-admin-php-amp-login-php-amp-index-php-amp-news-php"><a href="#修改-admin-php-amp-login-php-amp-index-php-amp-news-php" class="headerlink" title="修改 admin.php &amp; login.php &amp; index.php &amp; news.php"></a>修改 admin.php &amp; login.php &amp; index.php &amp; news.php</h3><figure class="highlight html"><figcaption><span>admin.php & login.php & index.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t"</span>&gt;</span>進站總人數 :1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>改為 admin.php &amp; login.php &amp; index.php &amp; news.php</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t"</span>&gt;</span>進站總人數 : <span class="php"><span class="meta">&lt;?</span>= $t7_text <span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-8-頁尾版權-10"><a href="#No-8-頁尾版權-10" class="headerlink" title="No.8 頁尾版權 (10%)"></a>No.8 頁尾版權 (10%)</h1><p>就拿第 7 題來改吧<br><img src="https://i.imgur.com/Uz7ESVU.png" alt="q1t8"></p>
<h2 id="修改後台的內容格式-1"><a href="#修改後台的內容格式-1" class="headerlink" title="修改後台的內容格式"></a>修改後台的內容格式</h2><p>整個複製版型後，根據需求做修改調整。題目未要求帶原值可自決定。記得 from 提交改成到 <code>do=footermdy</code>。</p>
<h3 id="新增-abottom-php（參考-atotal-php"><a href="#新增-abottom-php（參考-atotal-php" class="headerlink" title="新增 abottom.php（參考 atotal.php)"></a>新增 abottom.php（參考 atotal.php)</h3><figure class="highlight html"><figcaption><span>abottom.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$re = select(<span class="string">"q1t8_footer"</span>, <span class="number">1</span>);</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=footermdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>頁尾版權資料管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span>頁尾版權資料 ： <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"text[1]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $re[0]['text'] ?&gt;"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"修改確定"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-12"><a href="#增添-api-php-12" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'footermdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t8_footer"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=abottom"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台的顯示"><a href="#前台的顯示" class="headerlink" title="前台的顯示"></a>前台的顯示</h2><p>增加以下代碼做提取</p>
<h3 id="增添-lib-php-5"><a href="#增添-lib-php-5" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//t8</span></span><br><span class="line">$re = select(<span class="string">"q1t8_footer"</span>, <span class="number">1</span>);</span><br><span class="line">$t8_text = $re[<span class="number">0</span>][<span class="string">'text'</span>];</span><br></pre></td></tr></table></figure>

<p>將所有的進站總人數區域部分標籤內增加 php 變數</p>
<h3 id="修改-admin-php-amp-login-php-amp-index-php-amp-news-php-1"><a href="#修改-admin-php-amp-login-php-amp-index-php-amp-news-php-1" class="headerlink" title="修改 admin.php &amp; login.php &amp; index.php &amp; news.php"></a>修改 admin.php &amp; login.php &amp; index.php &amp; news.php</h3><figure class="highlight"><figcaption><span>admin.php & login.php & index.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;span class="t" style="line-height:123px;"&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<p>帶入 <code>$t8_text</code> 改為</p>
<figure class="highlight"><figcaption><span>admin.php & login.php & index.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;span class="t" style="line-height:123px;"&gt;&lt;?= $t8_text ?&gt;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-9-最新消息-55"><a href="#No-9-最新消息-55" class="headerlink" title="No.9 最新消息 (55%)"></a>No.9 最新消息 (55%)</h1><p>此題目與第六題都是文字類型管理，從此複製開始修改</p>
<p><img src="https://i.imgur.com/Uhxt0cY.png" alt="q1t9"></p>
<h2 id="後台的內容格式-4"><a href="#後台的內容格式-4" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>從複製版型開始，根據需求做修改調整</li>
<li>新增單項提交到 <code>view.php?do=newsadd</code></li>
<li>form 的提交到 <code>api.php?do=newsmdy</code></li>
<li>提交前多一組 <code>dpy[$id]=0</code>，這樣沒選的會是 0，有選的會是 1，update 時一律更新</li>
<li>後台題目沒要求分頁效果（可不做但前台有），本題根據示意圖有特別去做，設計 limit 與 page 關係</li>
</ol>
<h3 id="新增-anews-php（參考-aimage-php"><a href="#新增-anews-php（參考-aimage-php" class="headerlink" title="新增 anews.php（參考 aimage.php)"></a>新增 anews.php（參考 aimage.php)</h3><figure class="highlight html"><figcaption><span>anews.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>最新消息資料管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=newsmdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"68%"</span>&gt;</span>最新消息資料內容<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $nowpage = (<span class="keyword">empty</span>($_GET[<span class="string">'page'</span>])) ? <span class="number">1</span> : $_GET[<span class="string">'page'</span>];</span></span><br><span class="line"><span class="php">      $begin = ($nowpage - <span class="number">1</span>) * <span class="number">4</span>;</span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t9_news"</span>, <span class="string">"1 limit "</span> . $begin . <span class="string">",4"</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"text[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">cols</span>=<span class="string">"70"</span> <span class="attr">rows</span>=<span class="string">"3"</span>&gt;</span><span class="php"><span class="meta">&lt;?</span>= $value[<span class="string">'text'</span>] <span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="checkbox" name="dpy[&lt;?= $value['id'] ?&gt;]" value="1" &lt;?= ($value['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=newsadd')"</span> <span class="attr">value</span>=<span class="string">"新增最新消息圖片"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>添加分頁到兩個 table 之間</p>
<figure class="highlight html"><figcaption><span>anews.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">  $re = navpage(<span class="string">"q1t9_news"</span>, <span class="number">1</span>, <span class="number">4</span>, $nowpage);</span></span><br><span class="line"><span class="php">  <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $key =&gt; $value) &#123;</span></span><br><span class="line"><span class="php">    <span class="keyword">echo</span> <span class="string">'&lt;a class="bl" style="font-size:'</span> . (($nowpage == $key) ? <span class="string">"60"</span> : <span class="string">"30"</span>) . <span class="string">'px;" href="?do=anews&amp;page='</span> . $value . <span class="string">'"&gt;'</span> . $key . <span class="string">'&lt;/a&gt;'</span>;</span></span><br><span class="line"><span class="php">  &#125;</span></span><br><span class="line"><span class="php">  <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="新增單筆-4"><a href="#新增單筆-4" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃 （可複製前題目做修改）</p>
<h3 id="增添-view-php-6"><a href="#增添-view-php-6" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'newsadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增最新消息資料&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;span style="vertical-align:top;"&gt;最新消息資料 ： &lt;/span&gt;&lt;textarea name="text"&gt;&lt;/textarea&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>再來是對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-13"><a href="#增添-api-php-13" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'newsadd'</span>:</span><br><span class="line">  insert($_POST, <span class="string">"q1t9_news"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=anews"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-4"><a href="#修改多筆-刪除多筆-4" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-14"><a href="#增添-api-php-14" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'newsmdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t9_news"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t9_news"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=anews"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台的顯示-1"><a href="#前台的顯示-1" class="headerlink" title="前台的顯示"></a>前台的顯示</h2><ol>
<li>撈取之前，題目說明最多抓五個，超過時判斷 more 的顯示條件。</li>
<li>前台使用 <code>&lt;il&gt;&lt;/il&gt;</code> 去列表，只顯示部分字，利用 <code>mb_substr(DATA,START,RANGE)</code> 來處理此步驟。</li>
<li>滑鼠移過去時會自動跳完整內文，採用素材 JS 去完成</li>
<li>將 JS 分析出來，原 HTML 在 <code>&lt;ul&gt;&lt;/ul&gt;</code> 內部，推測格式結構為：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"ssaa"</span> <span class="attr">style</span>=<span class="string">"list-style-type:decimal;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>少量文字<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"all"</span> <span class="attr">style</span>=<span class="string">"display:none"</span>&gt;</span>完整文字<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此時開始規劃<code>More..</code>跟<code>多筆&lt;li&gt;</code>的 HTML 提取</p>
<h3 id="增添-lib-php-6"><a href="#增添-lib-php-6" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">//t9</span></span><br><span class="line"><span class="comment">//for index.php</span></span><br><span class="line">$re = select(<span class="string">"q1t9_news"</span>, <span class="string">"dpy=1"</span>);</span><br><span class="line">$t9_more = (count($re) &gt; <span class="number">5</span>) ? <span class="string">'&lt;a style="float:right" href="news.php"&gt;More..&lt;/a&gt;'</span> : <span class="string">''</span>;</span><br><span class="line">$re = select(<span class="string">"q1t9_news"</span>, <span class="string">"dpy=1 limit 5"</span>);</span><br><span class="line">$t9_text = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $data)</span><br><span class="line">  $t9_text .= <span class="string">'&lt;li&gt;'</span> . mb_substr($data[<span class="string">'text'</span>], <span class="number">0</span>, <span class="number">20</span>) . <span class="string">'&lt;span class="all" style="display:none"&gt;'</span> . $data[<span class="string">'text'</span>] . <span class="string">'&lt;/span&gt;&lt;/li&gt;'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>到前台調整 more 的出現時機，塞在標題右側</li>
<li>調整修改並加入 PHP 變數，(li 做在 lib.php 內）</li>
</ul>
<h3 id="修改-index-php-1"><a href="#修改-index-php-1" class="headerlink" title="修改 index.php"></a>修改 index.php</h3><figure class="highlight php"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;span class="t botli"&gt;最新消息區</span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;ul class="ssaa" style="list-style-type:decimal;"&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>修改為</p>
<figure class="highlight html"><figcaption><span>index.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>最新消息區<span class="php"><span class="meta">&lt;?</span>= $t9_more <span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"ssaa"</span> <span class="attr">style</span>=<span class="string">"list-style-type:decimal;"</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>= $t9_text <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="前台的-news-more"><a href="#前台的-news-more" class="headerlink" title="前台的 news more"></a>前台的 news more</h2><p>與 index.php 的最新消息觀念差不多，還要多個分頁功能。此外，JS 的 DOM 部分不太一致要小心。先把資料顯示做出來，參考前例之外，還多了 page 要規劃 limit</p>
<h3 id="增添-lib-php-7"><a href="#增添-lib-php-7" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//for news.php</span></span><br><span class="line">$nowpage = (<span class="keyword">empty</span>($_GET[<span class="string">'page'</span>])) ? <span class="number">1</span> : $_GET[<span class="string">'page'</span>];</span><br><span class="line">$t9_begin = ($nowpage - <span class="number">1</span>) * <span class="number">5</span>;</span><br><span class="line">$re = select(<span class="string">"q1t9_news"</span>, <span class="string">"dpy=1 limit "</span> . $t9_begin . <span class="string">",5"</span>);</span><br><span class="line">$t9_list = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $data)</span><br><span class="line">  $t9_list .= <span class="string">'&lt;li&gt;'</span> . mb_substr($data[<span class="string">'text'</span>], <span class="number">0</span>, <span class="number">20</span>) . <span class="string">'&lt;span class="all" style="display:none"&gt;'</span> . $data[<span class="string">'text'</span>] . <span class="string">'&lt;/span&gt;&lt;/li&gt;'</span>;</span><br></pre></td></tr></table></figure>

<p>接著修改前台，這裡要改 ol 才能指定編號，同時 start 自訂編號起始值，利用變數去配合。</p>
<h3 id="修改-news-php"><a href="#修改-news-php" class="headerlink" title="修改 news.php"></a>修改 news.php</h3><figure class="highlight html"><figcaption><span>news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--正中央--&gt;</span></span><br><span class="line">&lt;ol class="ssaa" style="list-style-type:decimal;" start=&lt;?=$t9_begin+1?&gt;&gt;</span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>=$t9_list<span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>再來是規劃分頁導覽，參考前台 news.php 的素材。</p>
<figure class="highlight html"><figcaption><span>news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"bl"</span> <span class="attr">style</span>=<span class="string">"font-size:30px;"</span> <span class="attr">href</span>=<span class="string">"?do=meg&amp;p=0"</span>&gt;</span><span class="symbol">&amp;lt;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"bl"</span> <span class="attr">style</span>=<span class="string">"font-size:30px;"</span> <span class="attr">href</span>=<span class="string">"?do=meg&amp;p=0"</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我們為了要規劃文字大小，我們把<a>部分移到 sql.php 提取的作業去</p>
<h3 id="增添-lib-php-8"><a href="#增添-lib-php-8" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//for news.php pagenav</span></span><br><span class="line">$re = navpage(<span class="string">"q1t9_news"</span>, <span class="string">"dpy=1"</span>, <span class="number">5</span>, $nowpage);</span><br><span class="line">$t9_page = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">foreach</span> ($re <span class="keyword">as</span> $key =&gt; $value)</span><br><span class="line">  $t9_page .= <span class="string">'&lt;a class="bl" style="font-size:'</span> . (($nowpage == $key) ? <span class="string">"60"</span> : <span class="string">"30"</span>) . <span class="string">'px;" href="?page='</span> . $value . <span class="string">'"&gt;'</span> . $key . <span class="string">'&lt;/a&gt;'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改-news-php-1"><a href="#修改-news-php-1" class="headerlink" title="修改 news.php"></a>修改 news.php</h3><figure class="highlight html"><figcaption><span>news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line">  <span class="php"><span class="meta">&lt;?</span>=$t9_page<span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-11-管理者帳號管理功能-15"><a href="#No-11-管理者帳號管理功能-15" class="headerlink" title="No.11 管理者帳號管理功能 (15%)"></a>No.11 管理者帳號管理功能 (15%)</h1><p>因為是文字型，所以挑第四題來複製修改。由於題目未說明清楚且示意圖未帶出 admin/1234 引此我們也不帶出。</p>
<p><img src="https://i.imgur.com/fkJgDij.png" alt="q1t11"></p>
<h2 id="後台的內容格式-5"><a href="#後台的內容格式-5" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>form 的提交到 <code>api.php?do=adminmdy</code></li>
<li>新增單項的提交到 <code>view.php?do=adminadd</code></li>
</ol>
<h3 id="新增-aadmin-php（參考-aad-php"><a href="#新增-aadmin-php（參考-aad-php" class="headerlink" title="新增 aadmin.php（參考 aad.php)"></a>新增 aadmin.php（參考 aad.php)</h3><figure class="highlight html"><figcaption><span>aadmin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>管理者帳號管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=adminmdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"34%"</span>&gt;</span>帳號<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"34%"</span>&gt;</span>密碼<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t10_admin"</span>, <span class="string">"id!=1"</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:90%"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"acc[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['acc'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:90%"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"pwd[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['pwd'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=adminadd')"</span> <span class="attr">value</span>=<span class="string">"新增管理者帳號"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="新增單筆-5"><a href="#新增單筆-5" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃 （可複製前題目做修改）</p>
<h3 id="增添-view-php-7"><a href="#增添-view-php-7" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'adminadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增管理者帳號&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;帳號 ： &lt;input name="acc" type="text"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;密碼 ： &lt;input name="pwd" type="password"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;確認密碼 ： &lt;input name="check" type="password"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）。題目沒要求驗證密碼判斷一致設計，因此不花時間做</p>
<h3 id="增添-api-php-15"><a href="#增添-api-php-15" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'adminadd'</span>:</span><br><span class="line">  <span class="keyword">unset</span>($_POST[<span class="string">'check'</span>]);</span><br><span class="line">  insert($_POST, <span class="string">"q1t10_admin"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aadmin"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-5"><a href="#修改多筆-刪除多筆-5" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-16"><a href="#增添-api-php-16" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'adminmdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t10_admin"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t10_admin"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=aadmin"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="No-12-選單管理功能-45"><a href="#No-12-選單管理功能-45" class="headerlink" title="No.12 選單管理功能 (45%)"></a>No.12 選單管理功能 (45%)</h1><p>這題步驟很多且版型欄位較多，是偷第四題來改並參考第三題的格式做調整</p>
<p><img src="https://i.imgur.com/SWP0XsG.png" alt="q1t12"></p>
<h2 id="後台的內容格式-6"><a href="#後台的內容格式-6" class="headerlink" title="後台的內容格式"></a>後台的內容格式</h2><ol>
<li>找到表格中間，塞入 <code>php:select</code> 並帶入 <code>tr&gt;td</code> HTML 顯示</li>
<li>跑回圈時取得各次選單的數量為 <code>$son</code></li>
<li>新增單項的提交到 <code>view.php?do=menuadd</code></li>
<li>form 的提交到 <code>api.php?do=menumdy</code></li>
<li>編輯次選單提交到 <code>view.php?do=menuchg</code> 並夾帶 ID</li>
<li>提交前多一組 dpy[$id]=0 這樣沒選的會是 0，有選的會是 1，update 時一律更新</li>
</ol>
<h3 id="新增-amenu-php（參考-aad-php"><a href="#新增-amenu-php（參考-aad-php" class="headerlink" title="新增 amenu.php（參考 aad.php)"></a>新增 amenu.php（參考 aad.php)</h3><figure class="highlight html"><figcaption><span>amenu.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"t cent botli"</span>&gt;</span>選單管理<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"api.php?do=menumdy"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"yel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"30%"</span>&gt;</span>主選單名稱<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"30%"</span>&gt;</span>選單連結網址<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"8%"</span>&gt;</span>次選單數<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>顯示<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"7%"</span>&gt;</span>刪除<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      $re = select(<span class="string">"q1t12_menu"</span>, <span class="string">"fa=0"</span>);</span></span><br><span class="line"><span class="php">      <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $value) &#123;</span></span><br><span class="line"><span class="php">        $many = count(select(<span class="string">"q1t12_menu"</span>, <span class="string">"fa="</span> . $value[<span class="string">'id'</span>]));</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:90%"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"text[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['text'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">style</span>=<span class="string">"width:90%"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"link[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['link'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="php"><span class="meta">&lt;?</span>= $many <span class="meta">?&gt;</span></span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"dpy[&lt;?= $value['id'] ?&gt;]"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">            &lt;input type="checkbox" name="dpy[&lt;?= $value['id'] ?&gt;]" value="1" &lt;?= ($value['dpy']) ? "checked" : "" ?&gt;&gt;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"del[]"</span> <span class="attr">value</span>=<span class="string">"&lt;?= $value['id'] ?&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=menuchg&amp;id=&lt;?= $value['id'] ?&gt;')"</span> <span class="attr">value</span>=<span class="string">"編輯次選單"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">      &#125;</span></span><br><span class="line"><span class="php">      <span class="meta">?&gt;</span></span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"margin-top:40px; width:70%;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">"200px"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"op('#cover','#cvr','view.php?do=menuadd')"</span> <span class="attr">value</span>=<span class="string">"新增主選單"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"cent"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"修改確定"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="新增單筆-6"><a href="#新增單筆-6" class="headerlink" title="新增單筆"></a>新增單筆</h2><p>對 view.php 做新的 case 規劃 （可複製前題目做修改）</p>
<h3 id="增添-view-php-8"><a href="#增添-view-php-8" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'menuadd'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;新增主選單&lt;/p&gt;</span><br><span class="line">    &lt;table class="cent" style="width:50%;margin:0 auto"&gt;</span><br><span class="line">      &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td&gt;選單名稱&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;選單連結網址&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/thead&gt;</span><br><span class="line">      &lt;tbody&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td&gt;&lt;input name=<span class="string">"text"</span> type=<span class="string">"text"</span>&gt;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;&lt;input name=<span class="string">"link"</span> type=<span class="string">"text"</span>&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;p class="cent"&gt;&lt;input value="新增" type="submit"&gt;&lt;input type="reset" value="重置"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-17"><a href="#增添-api-php-17" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'menuadd'</span>:</span><br><span class="line">  insert($_POST, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amenu"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="修改多筆-刪除多筆-6"><a href="#修改多筆-刪除多筆-6" class="headerlink" title="修改多筆 + 刪除多筆"></a>修改多筆 + 刪除多筆</h2><p>對 api.php 做 SQL 處理，接著回到該單元內容。（可複製前題目做修改）</p>
<h3 id="增添-api-php-18"><a href="#增添-api-php-18" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'menumdy'</span>:</span><br><span class="line">  update($_POST, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amenu"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="次選單"><a href="#次選單" class="headerlink" title="次選單"></a>次選單</h2><p>只剩此選單管理作業。這裡非常複雜需要吸收理解一下：</p>
<ol>
<li>這裡把新增修改刪除都做在一起了，我們要將列表思考成 new 跟 old，才能 new 做 insert，old 做 update 跟 delete</li>
<li>new 的 del 很麻煩且無意義，所以不要給新增欄位有刪除功能</li>
<li>function insert 一次只能一筆，所以要用迴圈去處理</li>
<li>新增欄位必須要靠 JQ 完成</li>
</ol>
<h3 id="增添-view-php-9"><a href="#增添-view-php-9" class="headerlink" title="增添 view.php"></a>增添 view.php</h3><figure class="highlight php"><figcaption><span>view.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'menuchg'</span>:</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">  &lt;form method=<span class="string">"post"</span> action=<span class="string">"api.php?do=&lt;?= $_GET['do'] ?&gt;&amp;id=&lt;?= $_GET['id'] ?&gt;"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    &lt;p class="t botli"&gt;編輯次選單&lt;/p&gt;</span><br><span class="line">    &lt;table class="cent" style="width:50%;margin:0 auto"&gt;</span><br><span class="line">      &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td&gt;選單名稱&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;選單連結網址&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;刪除&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/thead&gt;</span><br><span class="line">      &lt;tbody id=<span class="string">"tb"</span>&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        $re = select(<span class="string">"q1t12_menu"</span>, <span class="string">"fa="</span> . $_GET[<span class="string">'id'</span>]);</span><br><span class="line">        <span class="keyword">foreach</span> ($re <span class="keyword">as</span> $ro) &#123;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&lt;input name=<span class="string">"text[&lt;?= $ro['id'] ?&gt;]"</span> type=<span class="string">"text"</span> value=<span class="string">"&lt;?= $ro['text'] ?&gt;"</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input name=<span class="string">"link[&lt;?= $ro['id'] ?&gt;]"</span> type=<span class="string">"text"</span> value=<span class="string">"&lt;?= $ro['link'] ?&gt;"</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"del[]"</span> value=<span class="string">"&lt;?= $ro['id'] ?&gt;"</span>&gt;&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        <span class="meta">&lt;?php</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">?&gt;</span></span><br><span class="line">      &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;p class="cent"&gt;</span><br><span class="line">      &lt;input value=<span class="string">"修改確定"</span> type=<span class="string">"submit"</span>&gt;</span><br><span class="line">      &lt;input type=<span class="string">"reset"</span> value=<span class="string">"重置"</span>&gt;</span><br><span class="line">      &lt;input type=<span class="string">"button"</span> value=<span class="string">"更多"</span> onclick=<span class="string">"add()"</span>&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      txt = `</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;&lt;input name=<span class="string">"new[text][]"</span> type=<span class="string">"text"</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input name=<span class="string">"new[link][]"</span> type=<span class="string">"text"</span>&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        `;</span><br><span class="line">      $(<span class="string">"#tb"</span>).append(txt);</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>新資料：新欄位都被塞到一個叫 new 的混和陣列，整理成為 <code>$new[名稱]=連結</code>。然後再用 foreach 做批次處理新增</li>
<li>舊資料：拿掉 new 這東西後就只剩舊資料了，跟之前相同作法修改刪除</li>
</ul>
<h3 id="增添-api-php-19"><a href="#增添-api-php-19" class="headerlink" title="增添 api.php"></a>增添 api.php</h3><figure class="highlight php"><figcaption><span>api.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">'menuchg'</span>:</span><br><span class="line">  <span class="keyword">foreach</span> ($_POST[<span class="string">'new'</span>][<span class="string">'text'</span>] <span class="keyword">as</span> $key =&gt; $val) &#123;</span><br><span class="line">    $post[<span class="string">'text'</span>] = $val;</span><br><span class="line">    $post[<span class="string">'link'</span>] = $_POST[<span class="string">'new'</span>][<span class="string">'link'</span>][$key];</span><br><span class="line">    $post[<span class="string">'fa'</span>] = $_GET[<span class="string">'id'</span>];</span><br><span class="line">    insert($post, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">unset</span>($_POST[<span class="string">'new'</span>]);</span><br><span class="line">  update($_POST, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  delete($_POST, <span class="string">"q1t12_menu"</span>);</span><br><span class="line">  plo(<span class="string">"admin.php?do=amenu"</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="前台的-menu-顯示"><a href="#前台的-menu-顯示" class="headerlink" title="前台的 menu 顯示"></a>前台的 menu 顯示</h2><p>這裡素材已提供 CSS 互動效果（源於 HTML+js.js+css.css)，大致上效果為可以先理解為外層 div:mainmu，內層 div:mainmu2</p>
<ol>
<li>JS 收放效果主要是當滑鼠移動到 <code>.mainmu</code>（主選單）上時，該子對象（次選單）的 <code>.mu</code> 會顯示或隱藏</li>
<li>子對象一開始先 display:none</li>
<li><code>.mainmu</code> 為一個 orange css 效果， <code>.mainmu2</code> 為另一個 green css 效果，若畫面沒出現就檢查 css 的 icon 路徑是否正常並補上</li>
</ol>
<p>大致範例架構如下 （這裡為了精簡閱讀，style 都拿掉了）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>父<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu2 mw"</span> <span class="attr">style</span>=<span class="string">"display:none"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>子 A<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mainmu2 mw"</span> <span class="attr">style</span>=<span class="string">"display:none"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>子 B<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>所以到 lib.php 內做撈取動作，為了方便好寫，直接 HTML 放在回圈內跟著跑</p>
<h3 id="增添-lib-php-9"><a href="#增添-lib-php-9" class="headerlink" title="增添 lib.php"></a>增添 lib.php</h3><figure class="highlight php"><figcaption><span>lib.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//t12</span></span><br><span class="line">$t12_text = <span class="string">""</span>;</span><br><span class="line">$re1 = select(<span class="string">"q1t12_menu"</span>, <span class="string">"fa=0 and dpy=1"</span>);</span><br><span class="line"><span class="keyword">foreach</span> ($re1 <span class="keyword">as</span> $fa) &#123;</span><br><span class="line">  $t12_text .= <span class="string">'</span></span><br><span class="line"><span class="string">    &lt;a style="color:#000; font-size:13px; text-decoration:none;" href="'</span> . $fa[<span class="string">'link'</span>] . <span class="string">'"&gt;</span></span><br><span class="line"><span class="string">      &lt;div class="mainmu"&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;'</span> . $fa[<span class="string">'text'</span>] . <span class="string">'&lt;/span&gt;</span></span><br><span class="line"><span class="string">  '</span>;</span><br><span class="line">  $re2 = select(<span class="string">"q1t12_menu"</span>, <span class="string">"fa="</span> . $fa[<span class="string">'id'</span>]);</span><br><span class="line">  <span class="keyword">foreach</span> ($re2 <span class="keyword">as</span> $son) &#123;</span><br><span class="line">    $t12_text .= <span class="string">'</span></span><br><span class="line"><span class="string">        &lt;div class="mw mainmu2" style="display:none"&gt;</span></span><br><span class="line"><span class="string">          &lt;a style="color:#000; font-size:13px; text-decoration:none;" href="'</span> . $son[<span class="string">'link'</span>] . <span class="string">'"&gt;'</span> . $son[<span class="string">'text'</span>] . <span class="string">'&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    '</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  $t12_text .= <span class="string">'</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/a&gt;</span></span><br><span class="line"><span class="string">  '</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>將 login.php、index.php、news.php 的選單區域部分標籤內增加 php 變數</p>
<h3 id="修改-login-php-amp-index-php-amp-news-php"><a href="#修改-login-php-amp-index-php-amp-news-php" class="headerlink" title="修改 login.php &amp; index.php &amp; news.php"></a>修改 login.php &amp; index.php &amp; news.php</h3><figure class="highlight html"><figcaption><span>login.php & index.php & news.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"menuput"</span> <span class="attr">class</span>=<span class="string">"dbor"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--主選單放此--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"t botli"</span>&gt;</span>主選單區<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="php"><span class="meta">&lt;?</span>= $t12_text <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="END-調整版面-5"><a href="#END-調整版面-5" class="headerlink" title="END 調整版面 (5%)"></a>END 調整版面 (5%)</h1><p>這題動作如果來不及做可以放棄，元素材差異性下有可能不會被考官所注意到。</p>
<p><img src="https://i.imgur.com/Ji8jU7J.png" alt="q1layout"></p>
<h2 id="修改-login-php-amp-index-php-amp-news-php-amp-admin-php"><a href="#修改-login-php-amp-index-php-amp-news-php-amp-admin-php" class="headerlink" title="修改 login.php &amp; index.php &amp; news.php &amp; admin.php"></a>修改 login.php &amp; index.php &amp; news.php &amp; admin.php</h2><ol>
<li>找到主區域的 div 修改為</li>
</ol>
<figure class="highlight html"><figcaption><span>login.php & index.php & news.php & admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span> <span class="attr">style</span>=<span class="string">"overflow: scroll;margin: 10px auto;padding: 0;border: 0;"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>把多餘個寬度處理掉，找到 footer 把 width 拿掉改為</li>
</ol>
<figure class="highlight html"><figcaption><span>login.php & index.php & news.php & admin.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"left:0px; position:relative; background:#FC3; margin-top:4px; height:123px; display:block;"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>透過 Chrome 遊覽器檢查可以得到 1024*768 且上下左右 10px 並垂直至中的動作要求。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%8A%80%E8%A1%93%E5%A3%AB%E8%80%83%E7%85%A7%E8%88%87%E5%85%A8%E5%9C%8B%E6%8A%80%E8%83%BD%E7%AB%B6%E8%B3%BD/" rel="tag"># 技術士考照與全國技能競賽</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/05-14/exam-173002B10-0/" rel="prev" title="[題目解析] 技能檢定！網頁設計乙級術科考題分析（事前準備）">
      <i class="fa fa-chevron-left"></i> [題目解析] 技能檢定！網頁設計乙級術科考題分析（事前準備）
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/05-21/exam-173002B10-2/" rel="next" title="[題目解析] 技能檢定！網頁設計乙級術科考題分析（題組二）">
      [題目解析] 技能檢定！網頁設計乙級術科考題分析（題組二） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          關於本站
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#No-10-管理登入按鈕-20"><span class="nav-number">1.</span> <span class="nav-text">No.10 管理登入按鈕 (20%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修正登入連結"><span class="nav-number">1.1.</span> <span class="nav-text">修正登入連結</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-index-php-news-php-login-php"><span class="nav-number">1.1.1.</span> <span class="nav-text">修改 index.php, news.php, login.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#判斷是否已登入"><span class="nav-number">1.2.</span> <span class="nav-text">判斷是否已登入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-admin-php"><span class="nav-number">1.2.1.</span> <span class="nav-text">修改 admin.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FROM-提交動作"><span class="nav-number">1.3.</span> <span class="nav-text">FROM 提交動作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-login-php"><span class="nav-number">1.3.1.</span> <span class="nav-text">修改 login.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FROM-的-SQL-處理"><span class="nav-number">1.4.</span> <span class="nav-text">FROM 的 SQL 處理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#建立-api-php"><span class="nav-number">1.4.1.</span> <span class="nav-text">建立 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#登出作業"><span class="nav-number">1.5.</span> <span class="nav-text">登出作業</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-admin-php-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">修改 admin.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-api-php"><span class="nav-number">1.5.2.</span> <span class="nav-text">修改 api.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-3-網站標題-35"><span class="nav-number">2.</span> <span class="nav-text">No.3 網站標題 (35%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#內容區域調整"><span class="nav-number">2.1.</span> <span class="nav-text">內容區域調整</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-admin-php"><span class="nav-number">2.1.1.</span> <span class="nav-text">增添 admin.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式"><span class="nav-number">2.2.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-atitle-php"><span class="nav-number">2.2.1.</span> <span class="nav-text">修改 atitle.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#批次修改說明"><span class="nav-number">2.2.2.</span> <span class="nav-text">批次修改說明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#批次刪除說明"><span class="nav-number">2.2.3.</span> <span class="nav-text">批次刪除說明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆"><span class="nav-number">2.3.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#建立-view-php"><span class="nav-number">2.3.1.</span> <span class="nav-text">建立 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php"><span class="nav-number">2.3.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆"><span class="nav-number">2.4.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-1"><span class="nav-number">2.4.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改單一圖片"><span class="nav-number">2.5.</span> <span class="nav-text">修改單一圖片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php"><span class="nav-number">2.5.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-2"><span class="nav-number">2.5.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台顯示"><span class="nav-number">2.6.</span> <span class="nav-text">前台顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php"><span class="nav-number">2.6.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-admin-php-login-php-index-php-news-php"><span class="nav-number">2.6.2.</span> <span class="nav-text">修改 admin.php, login.php, index.php, news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-4-動態文字廣告-30"><span class="nav-number">3.</span> <span class="nav-text">No.4 動態文字廣告 (30%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-1"><span class="nav-number">3.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-aad-php-（參考-atitle-php"><span class="nav-number">3.1.1.</span> <span class="nav-text">新增 aad.php （參考 atitle.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-1"><span class="nav-number">3.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-3"><span class="nav-number">3.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-1"><span class="nav-number">3.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-4"><span class="nav-number">3.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台顯示-1"><span class="nav-number">3.4.</span> <span class="nav-text">前台顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-1"><span class="nav-number">3.4.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-login-php-index-php-news-php"><span class="nav-number">3.4.2.</span> <span class="nav-text">修改 login.php, index.php, news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-5-動畫圖片輪播-30"><span class="nav-number">4.</span> <span class="nav-text">No.5 動畫圖片輪播 (30%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-2"><span class="nav-number">4.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-amvim-php（參考-atitle-php"><span class="nav-number">4.1.1.</span> <span class="nav-text">新增 amvim.php（參考 atitle.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-2"><span class="nav-number">4.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-2"><span class="nav-number">4.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-5"><span class="nav-number">4.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-2"><span class="nav-number">4.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-6"><span class="nav-number">4.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改單一圖片-1"><span class="nav-number">4.4.</span> <span class="nav-text">修改單一圖片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-3"><span class="nav-number">4.4.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-7"><span class="nav-number">4.4.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的動畫顯示"><span class="nav-number">4.5.</span> <span class="nav-text">前台的動畫顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-2"><span class="nav-number">4.5.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-index-php"><span class="nav-number">4.5.2.</span> <span class="nav-text">修改 index.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-6-校園映像-40"><span class="nav-number">5.</span> <span class="nav-text">No.6 校園映像 (40%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-3"><span class="nav-number">5.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-aimage-php（參考-amvim-php"><span class="nav-number">5.1.1.</span> <span class="nav-text">新增 aimage.php（參考 amvim.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-3"><span class="nav-number">5.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-4"><span class="nav-number">5.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-8"><span class="nav-number">5.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-3"><span class="nav-number">5.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-9"><span class="nav-number">5.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改單一圖片-2"><span class="nav-number">5.4.</span> <span class="nav-text">修改單一圖片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-5"><span class="nav-number">5.4.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-10"><span class="nav-number">5.4.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的顯示格式"><span class="nav-number">5.5.</span> <span class="nav-text">前台的顯示格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-3"><span class="nav-number">5.5.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-index-php-amp-login-php-amp-news-php"><span class="nav-number">5.5.2.</span> <span class="nav-text">修改 index.php &amp; login.php &amp; news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-7-進站總人數-20"><span class="nav-number">6.</span> <span class="nav-text">No.7 進站總人數 (20%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修改後台的內容格式"><span class="nav-number">6.1.</span> <span class="nav-text">修改後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-atotal-php（參考-atitle-php"><span class="nav-number">6.1.1.</span> <span class="nav-text">新增 atotal.php（參考 atitle.php)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-11"><span class="nav-number">6.1.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的-total-顯示格式"><span class="nav-number">6.2.</span> <span class="nav-text">前台的 total 顯示格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-4"><span class="nav-number">6.2.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-admin-php-amp-login-php-amp-index-php-amp-news-php"><span class="nav-number">6.2.2.</span> <span class="nav-text">修改 admin.php &amp; login.php &amp; index.php &amp; news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-8-頁尾版權-10"><span class="nav-number">7.</span> <span class="nav-text">No.8 頁尾版權 (10%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修改後台的內容格式-1"><span class="nav-number">7.1.</span> <span class="nav-text">修改後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-abottom-php（參考-atotal-php"><span class="nav-number">7.1.1.</span> <span class="nav-text">新增 abottom.php（參考 atotal.php)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-12"><span class="nav-number">7.1.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的顯示"><span class="nav-number">7.2.</span> <span class="nav-text">前台的顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-5"><span class="nav-number">7.2.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-admin-php-amp-login-php-amp-index-php-amp-news-php-1"><span class="nav-number">7.2.2.</span> <span class="nav-text">修改 admin.php &amp; login.php &amp; index.php &amp; news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-9-最新消息-55"><span class="nav-number">8.</span> <span class="nav-text">No.9 最新消息 (55%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-4"><span class="nav-number">8.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-anews-php（參考-aimage-php"><span class="nav-number">8.1.1.</span> <span class="nav-text">新增 anews.php（參考 aimage.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-4"><span class="nav-number">8.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-6"><span class="nav-number">8.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-13"><span class="nav-number">8.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-4"><span class="nav-number">8.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-14"><span class="nav-number">8.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的顯示-1"><span class="nav-number">8.4.</span> <span class="nav-text">前台的顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-6"><span class="nav-number">8.4.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-index-php-1"><span class="nav-number">8.4.2.</span> <span class="nav-text">修改 index.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的-news-more"><span class="nav-number">8.5.</span> <span class="nav-text">前台的 news more</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-7"><span class="nav-number">8.5.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-news-php"><span class="nav-number">8.5.2.</span> <span class="nav-text">修改 news.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-8"><span class="nav-number">8.5.3.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-news-php-1"><span class="nav-number">8.5.4.</span> <span class="nav-text">修改 news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-11-管理者帳號管理功能-15"><span class="nav-number">9.</span> <span class="nav-text">No.11 管理者帳號管理功能 (15%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-5"><span class="nav-number">9.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-aadmin-php（參考-aad-php"><span class="nav-number">9.1.1.</span> <span class="nav-text">新增 aadmin.php（參考 aad.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-5"><span class="nav-number">9.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-7"><span class="nav-number">9.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-15"><span class="nav-number">9.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-5"><span class="nav-number">9.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-16"><span class="nav-number">9.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-12-選單管理功能-45"><span class="nav-number">10.</span> <span class="nav-text">No.12 選單管理功能 (45%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#後台的內容格式-6"><span class="nav-number">10.1.</span> <span class="nav-text">後台的內容格式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#新增-amenu-php（參考-aad-php"><span class="nav-number">10.1.1.</span> <span class="nav-text">新增 amenu.php（參考 aad.php)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增單筆-6"><span class="nav-number">10.2.</span> <span class="nav-text">新增單筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-8"><span class="nav-number">10.2.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-17"><span class="nav-number">10.2.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改多筆-刪除多筆-6"><span class="nav-number">10.3.</span> <span class="nav-text">修改多筆 + 刪除多筆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-18"><span class="nav-number">10.3.1.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#次選單"><span class="nav-number">10.4.</span> <span class="nav-text">次選單</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-view-php-9"><span class="nav-number">10.4.1.</span> <span class="nav-text">增添 view.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-api-php-19"><span class="nav-number">10.4.2.</span> <span class="nav-text">增添 api.php</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前台的-menu-顯示"><span class="nav-number">10.5.</span> <span class="nav-text">前台的 menu 顯示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增添-lib-php-9"><span class="nav-number">10.5.1.</span> <span class="nav-text">增添 lib.php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改-login-php-amp-index-php-amp-news-php"><span class="nav-number">10.5.2.</span> <span class="nav-text">修改 login.php &amp; index.php &amp; news.php</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#END-調整版面-5"><span class="nav-number">11.</span> <span class="nav-text">END 調整版面 (5%)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#修改-login-php-amp-index-php-amp-news-php-amp-admin-php"><span class="nav-number">11.1.</span> <span class="nav-text">修改 login.php &amp; index.php &amp; news.php &amp; admin.php</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Loki Jiang"
      src="/images/loki_img.jpg">
  <p class="site-author-name" itemprop="name">Loki Jiang</p>
  <div class="site-description" itemprop="description">Time waits for no oneヽ(｀Д´)ﾉ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/summer10920" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;summer10920" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:summer10920@gmail.com" title="E-Mail → mailto:summer10920@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://codepen.io/summer10920/pens/public" title="CodePen → https:&#x2F;&#x2F;codepen.io&#x2F;summer10920&#x2F;pens&#x2F;public" rel="noopener" target="_blank"><i class="fa fa-fw fa-codepen"></i>CodePen</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Loki Jiang</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

</body>
</html>
